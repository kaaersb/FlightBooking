
<Window x:Class="GUI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:GUI"
        mc:Ignorable="d"
        Title="MainWindow" Height="750" Width="1000">
    <Window.Resources>
        <local:UrlToImageConverter x:Key="UrlToImageConverter"/>
        <local:DurationConverter x:Key="DurationConverter"/>
    </Window.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*"/>
            <ColumnDefinition Width="4*"/>
            <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="0.5*" />
            <RowDefinition Height="1*" />
            <RowDefinition Height="2*" />
            <RowDefinition Height="0.5*" />
        </Grid.RowDefinitions>

        <TextBlock x:Name="WelcomeText"
                   Visibility="Visible"
                   Grid.Row="0"
                   Grid.Column="0">
            Welcome
        </TextBlock>

        <StackPanel Orientation="Horizontal" Grid.Row="0" Grid.Column="2">
            <Button x:Name="login"
                    Content="Log in"
                    Click="OpenLoginViewWindow_Click"
                    FontFamily="Arial" Foreground="#FF0E0C07"
                    Height="30"
                    Width="50"
                    Margin="10,10,10,10"
                    />
            <Button x:Name="createUser" 
                    Content="Opret Bruger" 
                    Click="OpenCreateUserWindow_Click" 
                    FontFamily="Arial" Foreground="#FF0E0C07"
                    Height="30"
                    Width="75"/>
            

            <Button x:Name="ProfileButton"
                    Visibility="Collapsed"
                    Width="32" Height="32"
                    Click="OpenProfile_Click">
                
            </Button>

        </StackPanel>

        <!-- Knap til at hente flydata -->
        <Button x:Name="btnGetFlights" 
                Content="Hent Fly" 
                HorizontalAlignment="Center" 
                Click="btnGetFlights_Click"
                Grid.Row="1"
                Grid.Column="1"
                Height="30"
                Width="50"
                VerticalAlignment="Bottom"
                   />

        <!-- Border der omringer søge felterne -->
        <Border BorderThickness="1" 
                BorderBrush="#FF5F5F5F" 
                CornerRadius="4" 
                HorizontalAlignment="Center"
                Grid.Column="1"
                Grid.Row="1"
                Height="100"
                Width="650"
                >
            <!-- Samlende StackPanel til søge felterne -->
            <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center">
                <!-- StackPanel der holder på Fra/Til felter -->
                <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Left">

                    <!-- TextBox til afrejse -->
                    <TextBox x:Name="departureAirport"
                             Width="100"
                             Height="30"
                             Text="Fra?" Background="White" TextWrapping="Wrap"
                             />

                    <!-- Textbox til destination -->
                    <TextBox x:Name="arrivalAirport" 
                             HorizontalAlignment="Left" 
                             Width="100"
                             Height="30"
                             Margin="0,0,10,0"
                             Text="Til?"
                             />

                </StackPanel >
                <StackPanel Orientation="Horizontal">
                    <Label Content="Udrejse dato:"
                       Height="30"
                       />
                    <DatePicker x:Name="datePickerOutbound"
                                Height="30"
                                Padding="5" Cursor="Hand" Text="Udrejse"
                            />
                    <Label Content="Hjemrejse dato:"
                           Height="30"
                           />
                    <DatePicker x:Name="datePickerInbound"
                                Height="30"
                                Padding="5" Cursor="Hand" Text="Hjemrejse"/>
                </StackPanel>

            </StackPanel>
        </Border>

        <ListBox ItemsSource="{Binding Flights}"
                 Grid.Row="2" Grid.Column="1"
                 Background="Transparent" 
                 BorderThickness="0"
                 Padding="0"
                 Margin="0">
                 <ListBox.ItemTemplate>
                 <DataTemplate>
                    <Border CornerRadius="6"
                            BorderBrush="#CCC"
                            BorderThickness="1"
                            Width="600"
                            Height="100"
                            Padding="12"
                            Margin="0,0,0,8"
                            Background="White"
                            SnapsToDevicePixels="True">
                        <Grid VerticalAlignment="Center">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <!-- Logo -->
                                <ColumnDefinition Width="2*"/>
                                <!-- Airline & flight# -->
                                <ColumnDefinition Width="2*"/>
                                <!-- Times & airports -->
                                <ColumnDefinition Width="Auto"/>
                                <!-- Duration -->
                                <ColumnDefinition Width="Auto"/>
                                <!-- Price + button -->
                            </Grid.ColumnDefinitions>

                            <!-- 1) Logo -->
                            <Image Grid.Column="0" Width="40" Height="40"
                                   Source="{Binding AirlineLogo, Converter={StaticResource UrlToImageConverter}}"
                                   Margin="0,0,16,0"
                                   VerticalAlignment="Center"/>

                            <!-- 2) Airline name + flight number -->
                            <StackPanel Grid.Column="1" Orientation="Vertical" VerticalAlignment="Center">
                                <TextBlock Text="{Binding Airline}"
                                           FontWeight="Bold"
                                           FontSize="14"/>
                                <TextBlock Text="{Binding FlightNumber}"
                                           Foreground="#666"
                                           FontSize="12"/>
                            </StackPanel>

                            <!-- 3) Departure & arrival -->
                            <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                                <StackPanel Orientation="Vertical">
                                    <TextBlock FontWeight="SemiBold" Text="{Binding DepartureAirport.id}"/>
                                    <TextBlock Text="{Binding DepartureUtc, StringFormat={}{0:HH:mm}}" Foreground="#444"/>
                                </StackPanel>
                                <StackPanel Orientation="Vertical">
                                    <TextBlock FontWeight="SemiBold" Text="{Binding ArrivalAirport.id}"/>
                                    <TextBlock Text="{Binding ArrivalUtc, StringFormat={}{0:HH:mm}}" Foreground="#444"/>
                                </StackPanel>
                            </StackPanel>

                            <!-- 4) Duration -->
                            <TextBlock Grid.Column="3"
                                       VerticalAlignment="Center"
                                       Margin="24,0"
                                        FontSize="12">
                                <TextBlock.Text>
                                    <MultiBinding Converter="{StaticResource DurationConverter}">
                                        <Binding Path="DepartureUtc"/>
                                        <Binding Path="ArrivalUtc"/>
                                    </MultiBinding>
                                </TextBlock.Text>
                            </TextBlock>

                            <!-- 5) Price + button -->
                            <StackPanel Grid.Column="4"
                                        Orientation="Horizontal"
                                        VerticalAlignment="Center"
                                        Margin="24,0,0,0">
                                <TextBlock Text="{Binding Price, StringFormat={}{0:C}}"
                                           FontWeight="Bold"
                                           FontSize="16"
                                           VerticalAlignment="Center"/>
                                <Button Content="Vælg"
                                        Margin="12,0,0,0"
                                        Padding="12,4"
                                        Background="#0078D7"
                                        Foreground="White"
                                        FontSize="12"
                                        Cursor="Hand"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

    </Grid>
</Window>
